<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="/css/dashboard.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- <button list -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    
    <!-- Before </body> tag -->
    <title>ขายเครื่องดื่ม</title>
</head>
<body>
   <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">ร้านชาตันหยง ซอยสุนทรวิภาค</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <!-- <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search"> -->
  <div class="navbar-nav">
    <div class="nav-item text-nowrap">
      <% if (loggedIn) {%>
        <a class="btn btn-sm btn-danger" href="/logout">
          Sign out
          <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
              <style>
                  svg {
                      fill: #ffffff;
                  }
              </style>
              <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/>
          </svg>
      </a>
      
      <% } %>

      <% if (!loggedIn) {%>
        <a class="btn btn-sm btn-outline-secondary mx-3" href="/login">Sign In</a>
        <a class="btn btn-sm btn-success" href="/register">Sign Up</a>
        <% } %>

    </div>
  </div>
</header>

    <main class="container px-2 px-lg-2 my-3">
        <a href="/home" class="btn btn-outline-secondary">
            <i class="fa-solid fa-arrow-left"></i>
            กลับสู่หลังบ้าน</a>
            <br>
            <br>
        <div class="row">
            <div class="col-md-8">
                <h1><i class="fa-solid fa-whiskey-glass"></i> รายการเมนู</h1>
                <br>
                <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

                <!-- Your navigation tabs -->
                <ul class="nav nav-pills nav-fill gap-2 p-1 small bg-black rounded-5 shadow-sm" id="pillNav2" role="tablist" style="--bs-nav-link-color: var(--bs-white); --bs-nav-pills-link-active-color: var(--bs-black); --bs-nav-pills-link-active-bg: var(--bs-white);">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active rounded-5" id="all-tab2" data-bs-toggle="tab" type="button" role="tab" aria-selected="true" data-type="all">ทั้งหมด</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-5" id="hot-tab2" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" data-type="hot"><i class="fa-solid fa-mug-saucer"></i>  ร้อน</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-5" id="cold-tab2" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" data-type="cold"><i class="bi bi-cup-straw"></i>  เย็น</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-5" id="mix-tab2" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" data-type="blended"><i class="fa-solid fa-blender"></i>  ปั่น</button>
                  </li>
                </ul>
                <hr>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/home"><i class="fa-solid fa-house"></i> Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">รับออเดอร์</li>
                    </ol>
                </nav>
                
                <div class="container px-4 px-lg-5 mt-5">
                    <div class="product-row row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-start"
                         id="product-list"></div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card aspect-ratio-1x1 rounded-5" style="height: 600px;">
                    <div class="card-body p-4">
                    <div class="small mb-1 fw-bold">ราคา</div>
                </div>
                <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                    <div class="card-body p-4">
                        <div class="row">
                            <div class="col">
                                <div class="small mb-1 fw-bold">Total</div>
                            </div>
                            <div class="col text-end">
                                <div class="small mb-1">฿</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer p-4 pt-0 border-top-0 bg-transparent text-center">
                        <a href="/paymentoptions" class="btn btn-success btn-lg">ยืนยันคำสั่งซื้อ</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    
<!-- Add this modal HTML somewhere in your document -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel">รายละเอียด</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Input Form -->
                <form id="inputForm">
                    <div class="mb-3">
                        <label for="productName" class="form-label">Product Name</label>
                        <input type="text" class="form-control" id="productName" name="productName" required>
                    </div>
                    <div class="mb-3">
                        <label for="productPrice" class="form-label">Product Price</label>
                        <input type="number" class="form-control" id="productPrice" name="productPrice" required>
                    </div>
                    

                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>

                <!-- Product details will be displayed here -->
            </div>
        </div>
    </div>
</div>

  
  <script>
    function fetchAndDisplayProducts(productType) {
      axios.get(`/products?type=${productType}`)
        .then(response => {
          const products = response.data;
          const productListElement = document.getElementById('product-list');
          productListElement.innerHTML = ''; // Clear existing products
  
          products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = 'col mb-5';
            productCard.innerHTML = `
              <div class="card h-100" data-bs-toggle="modal" data-bs-target="#productModal" onclick="openProductModal('${product.productname}', ${product.price}, 'images/products/${product.image}')">
                <img class="card-img-top" src="images/products/${product.image}" style="width: 100%; height: 200px;">
                <div class="card-body p-4">
                  <div class="text-center">
                    <h5 class="fw-bolder">${product.productname}</h5>
                    ${product.price} ฿
                  </div>
                </div>
                <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                </div>
              </div>`;
  
            productListElement.appendChild(productCard);
          });
        })
        .catch(error => {
          console.error('Error fetching product data:', error);
        });
    }
  
    function openProductModal(productName, productPrice, productImage) {
      const modalBody = document.getElementById('productModalBody');
      modalBody.innerHTML = `
        <img src="${productImage}" style="width: 100%; height: 200px;">
        <div class="text-center">
          <h5 class="fw-bolder">${productName}</h5>
          ${productPrice} ฿
        </div>
      `;
    }
  
    document.getElementById('pillNav2').addEventListener('click', function (event) {
      if (event.target.tagName === 'BUTTON') {
        const productType = event.target.dataset.type;
        fetchAndDisplayProducts(productType);
      }
    });
  
    // Initial fetch and display all products
    fetchAndDisplayProducts('all');
  </script>
  
    
</body>

</html>
<style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
    }

    .drinkbutton {
        position: fixed;
        bottom: 10px;
        right: 10px;
        z-index: 1000;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }

    body {
        font-family: 'Prompt', sans-serif;
    }

    h1 {
        font-family: 'Prompt', sans-serif;
    }

    .breadcrumb-item a {
        text-decoration: none;
        color: inherit;
    }

    .breadcrumb-item a:hover {
        text-decoration: underline;
    }

    .product-row {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
    }

    .col.mb-5 {
        flex: 0 0 33.33%;
        max-width: 33.33%;
    }
</style>
